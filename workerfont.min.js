const CACHE_NAME="kaneism-asset-cache-v1",ASSETS_TO_CACHE=["/assets/css/build/kaneism-inline-head.min.css","/assets/css/build/kaneism-base-layout.min.css","/assets/css/build/kaneism-global-layout.min.css","/assets/css/build/01-theme-clean.min.css","/assets/css/build/kaneism-helpers.min.css","/assets/js/core/base.js","/assets/img/bg/splat-corner.webp","/favicon.ico","/assets/img/icon/safari-pinned-tab.svg","/assets/img/icon/favicon-32x32.png","/assets/img/icon/favicon-16x16.png","/assets/img/icon/apple-touch-icon.png","/assets/img/icon/mstile-144x144.png"];self.addEventListener("install",(event=>{event.waitUntil(caches.open(CACHE_NAME).then((cache=>(console.log("Cache opened, adding assets"),cache.addAll(ASSETS_TO_CACHE)))).catch((error=>{console.error("Error during service worker install:",error)}))),self.skipWaiting()})),self.addEventListener("activate",(event=>(event.waitUntil(caches.keys().then((cacheNames=>Promise.all(cacheNames.filter((cacheName=>cacheName.startsWith("kaneism-asset-cache-")&&cacheName!==CACHE_NAME)).map((cacheName=>(console.log("Deleting old cache:",cacheName),caches.delete(cacheName)))))))),self.clients.claim()))),self.addEventListener("fetch",(event=>{event.request.url.startsWith(self.location.origin)&&"GET"===event.request.method&&event.request.url.match(/\.(css|js|png|jpg|jpeg|gif|svg|webp|woff|woff2|ttf|eot|ico)$/)&&event.respondWith(caches.match(event.request).then((cachedResponse=>cachedResponse||fetch(event.request).then((response=>{if(!response||200!==response.status||"basic"!==response.type)return response;const responseToCache=response.clone();return caches.open(CACHE_NAME).then((cache=>{cache.put(event.request,responseToCache)})).catch((error=>{console.error("Error caching new asset:",error)})),response})).catch((error=>{console.error("Fetch failed:",error)})))))})),self.addEventListener("message",(event=>{event.data&&"SKIP_WAITING"===event.data.type&&self.skipWaiting()}));